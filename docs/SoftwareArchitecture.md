# è½¯ä»¶ä½“ç³»æ¶æ„
[toc]
## èƒŒæ™¯
GitHub ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„å…³äºå¤©æ°”é¢„æµ‹çš„ Repository ï¼Œä½†éƒ½æ˜¯åŸºäºæœ¬åœ°åŒ–å’Œç½‘ç»œçˆ¬è™«è¿›è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†è¿™ä¸ªRepositoryã€‚æˆ‘ä»¬çš„é¡¹ç›®åŸºäºæœºå™¨å­¦ä¹ çš„éšæœºæ£®æ—æ¨¡å‹å¯¹å¤©æ°”è¿›è¡Œé¢„æµ‹ï¼Œå¹¶ä¸”é€šè¿‡Streamlit Cloud éƒ¨ç½²åˆ°æœåŠ¡å™¨ç«¯ã€‚


å¦‚æœä½ å¯¹æˆ‘çš„ç½‘ç«™æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„çº¿ä¸Šç½‘ç«™[ğŸŒ¦ï¸Weather Now](https://weathernowpublic.streamlit.app/) æ¥å¼€å§‹ã€‚



## âœ¨ åŠŸèƒ½
* **å®æ—¶å¤©æ°”æŸ¥è¯¢**ï¼šè·å–å…¨çƒå„åŸå¸‚çš„å½“å‰å¤©æ°”ã€‚
* **æœºå™¨å­¦ä¹ é¢„æµ‹**ï¼šä½¿ç”¨éšæœºæ£®æ—ç®—æ³•è®­ç»ƒæ¨¡å‹å¹¶æ‹Ÿåˆæ•°æ®
* **å¤©æ°”è¯¦ç»†ä¿¡æ¯**ï¼šæ˜¾ç¤ºæ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹ã€é£é€Ÿç­‰ã€‚
* **ç®€æ´æ˜“ç”¨**ï¼šå‹å¥½çš„ç”¨æˆ·ç•Œé¢å’Œäº¤äº’ä½“éªŒã€‚

## âŒ¨ï¸ æŠ€æœ¯æ ˆ
* **å‰ç«¯**ï¼šHTML, CSS, JavaScript
* **åç«¯**ï¼šPython
* **API**ï¼šStreamlit API 

## é¡¹ç›®è§„èŒƒ
### é¡¹ç›®ç»“æ„
æˆ‘ä»¬éµå¾ªäº† Github é¡¹ç›®ï¼š[pythonic-project-guidelines](https://github.com/pyloong/pythonic-project-guidelines)çš„è§„èŒƒè¦æ±‚ï¼Œå¯¹é¡¹ç›®æ–‡ä»¶ç»“æ„æ„æˆå¦‚ä¸‹ï¼š
> * db
> * docs
> * src
>   * lib
>       * \_\_init__.py
> * tests
>  * README\.md

### æäº¤è§„èŒƒ

æˆ‘ä»¬å‚è€ƒäº† AngularJS åœ¨ github ä¸Šçš„[æäº¤è®°å½•](https://www.npmjs.com/package/commitizen)
é‡‡ç”¨æ ¼å¼ï¼š         

> type(scope) : subject

( 1 ) typeï¼ˆå¿…é¡»ï¼‰ : commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢å‡ ä¸ªæ ‡è¯†ï¼š

feat : æ–°åŠŸèƒ½  
fix : ä¿®å¤bug    
docs : æ–‡æ¡£æ”¹å˜  
style : ä»£ç æ ¼å¼æ”¹å˜   
refactor : æŸä¸ªå·²æœ‰åŠŸèƒ½é‡æ„  
perf : æ€§èƒ½ä¼˜åŒ–  
test : å¢åŠ æµ‹è¯•  
build : æ”¹å˜äº†buildå·¥å…· å¦‚ gruntæ¢æˆäº† npm  
revert : æ’¤é”€ä¸Šä¸€æ¬¡çš„ commit  
chore : æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨  
( 2 ) scopeï¼ˆå¯é€‰ï¼‰ : ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒã€‚    
( 3 ) subjectï¼ˆå¿…é¡»ï¼‰ : commit çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚commitizen æ˜¯ä¸€ä¸ªæ’°å†™åˆæ ¼ Commit message çš„å·¥å…·ï¼Œéµå¾ª Angular çš„æäº¤è§„èŒƒã€‚  

## å·¥ä½œé‡åŒ–

### ä»£ç æäº¤
ç”±äºè½¯ä»¶å¼€å‘æ˜¯ä»æ•°æ®è·å–å¼€å§‹è¿›è¡Œçš„ï¼Œå³ä»ç½‘ç»œä¸Šè·å–å¤©æ°”æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†ã€‚å› æ­¤æˆ‘ä»¬åœ¨é¡¹ç›®è¿›è¡Œçš„ç¬¬ä¸€å‘¨ä»£ç æäº¤é‡è¾ƒå°‘ã€‚
åœ¨æ­å»ºå®ŒåŸºç¡€çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå³**æ•°æ®è®¿é—®å±‚**å’Œ**æœåŠ¡å±‚**ä¹‹åï¼Œæˆ‘ä»¬è¿›è¡Œäº†**è¡¨ç¤ºå±‚**å’Œ**åº”ç”¨å±‚**çš„å¼€å‘ï¼Œæˆ‘ä»¬çš„è¿™é‡Œæˆ‘ä»¬å…ˆè¿›è¡Œäº†æœ¬åœ°éƒ¨ç½²ï¼Œåœ¨è¿›è¡Œäº†å¯è§†åŒ–çš„éƒ¨ç½²ï¼Œå› æ­¤ä»£ç æäº¤è¡Œæ•°è¾ƒé«˜ã€‚

![Code_frequency](/images/Code_frequency.png)

ä»commitæäº¤æ¥çœ‹ï¼Œæˆ‘ä»¬æ€»å…±æäº¤äº†28æ¬¡commitã€‚

![Commits_over_time](/images/Commits_over_time.png)



### é¡¹ç›®å¼€å‘

æˆ‘ä»¬çš„å¼€å‘æœ€å¼€å§‹æ˜¯é€šè¿‡å¼€å‘æ—¥å¿—çš„å½¢å¼è¿›è¡Œï¼Œåç»­æ”¹ä¸ºissueã€‚
è´´å›¾



æˆªæ­¢2024.12.10ï¼Œæˆ‘ä»¬å·²ç»è¿­ä»£äº†å››ä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”å‘å¸ƒåœ¨relesesä¸­ï¼Œæˆ‘ä»¬çš„ç‰ˆæœ¬æœ‰
è´´å›¾ï¼Œç‰ˆæœ¬æ›´æ–°å›¾


## ğŸ› ï¸ ä¾èµ–

å¦‚æœä½ å°è¯•æœ¬åœ°éƒ¨ç½²æœ¬é¡¹ç›®ï¼Œè¯·ç¡®ä¿ä½ æ­£ç¡®å®‰è£…äº†ä»¥ä¸‹è¿™äº›æ¨¡å—ï¼Œä»¥ä¸‹æ˜¯ä¸¤ç§ä¾èµ–å®‰è£…çš„ä¾‹ç¨‹ï¼Œä»–å°†æŒ‡å¯¼ä½ å¦‚ä½•æ­£ç¡®é…ç½®ä¾èµ–ã€‚
1. æˆ‘ä»¬æä¾›äº†é…ç½®ä¾èµ–çš„å·¥å…·[ Require.exe ](/Require.exe)ï¼Œä½ å¯ä»¥**é¿å…æ‰€æœ‰çš„å‘½ä»¤è¡Œæ“ä½œ**ï¼Œåªéœ€è¦è¿è¡Œæ­¤å·¥å…·å³å¯ã€‚

2. å¦‚æœä½ ä½¿ç”¨çš„å¹¶é`windos`ç³»ç»Ÿæˆ–è€…åŸºäºå…¶ä»–ç†ç”±å¸Œæœ›ä½¿ç”¨å‘½ä»¤è¡Œã€‚
   ä½ å¯ä»¥é€šè¿‡**ä¾èµ–ç®¡ç†å·¥å…·**ï¼Œä¾‹å¦‚`pip`æ¥å®‰è£…è¿™äº›æ¨¡å—ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨`pip`è¿›è¡Œä¾èµ–é…ç½®çš„ä¾‹ç¨‹ã€‚ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š
    >[!TIP]
    >åœ¨æ­¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„`pip`å¤„äºæœ€æ–°ç‰ˆæœ¬
    >ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯¹`pip`æ›´æ–°
    >```cmd
    >pip install --upgrade pip
    >```
    ```
    pip install moudelname
    ```

* [numpy](https://pypi.org/project/numpy/)
* [streamlit](https://pypi.org/project/streamlit/)
* [pandas](https://pypi.org/project/pandas/)
* [scikit_learn](https://pypi.org/project/scikit_learn/)

_è½¬åˆ° [requirements.txt](/requirements.txt) æŸ¥çœ‹æ‰€æœ‰ä½ æ‰€åº”å®‰è£…çš„æ¨¡å—_


## ä¸€é”®éƒ¨ç½²
æˆ‘ä»¬çš„é¡¹ç›®éå¸¸æ˜“äºéƒ¨ç½²ï¼Œä½¿ç”¨EXE



## æ¶æ„
æœ¬é¡¹ç›®å¤§ä½“ä¸Šé‡‡ç”¨äº†åˆ†å±‚ç³»ç»Ÿé£æ ¼æ¶æ„ã€‚
æ€»ä½“åˆ†ä¸º**è¡¨ç¤ºå±‚**ï¼Œ**åº”ç”¨å±‚**ï¼Œ**æœåŠ¡å±‚**ï¼Œ**æ•°æ®è®¿é—®å±‚**ã€‚
å±‚ä¸å±‚ä¹‹å‰ä¸èƒ½ç›´æ¥è¿›è¡Œäº’é€šï¼Œéç›¸é‚»åˆ†å±‚ä¹‹é—´ä¸å¯ä»¥è¿›è¡Œæ•°æ®äº’é€šï¼Œåªå¯ä»¥è¿›è¡Œè¿­ä»£è®¿é—®ã€‚
### å±‚çš„åˆ’åˆ†
```
è¡¨ç¤ºå±‚ï¼š è´Ÿè´£å¤„ç†ç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·äº¤äº’ã€‚ä¾‹å¦‚ï¼Œç½‘é¡µæˆ–ç§»åŠ¨åº”ç”¨çš„å‰ç«¯ç•Œé¢ã€‚
åº”ç”¨å±‚ï¼š åŒ…å«ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚å¹¶æ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚
æœåŠ¡å±‚ï¼š æä¾›åº”ç”¨å±‚æ‰€éœ€çš„ç‰¹å®šæœåŠ¡ï¼Œå¦‚è®¤è¯æˆ–æ•°æ®è½¬æ¢æœåŠ¡ã€‚
æ•°æ®è®¿é—®å±‚ï¼š è´Ÿè´£ä¸æ•°æ®åº“æˆ–å…¶ä»–æŒä¹…æ€§å­˜å‚¨è¿›è¡Œäº¤äº’ã€‚
```




#### æ•°æ®è®¿é—®å±‚
æ„æˆæ•°æ®è®¿é—®å±‚çš„ä¸»è¦ç±»ä¸º`GetData`ã€‚é€šè¿‡è·å–æ•°æ®ä½¿å¾—æ•´ä¸ªç¨‹åºå¾—ä»¥è¿è½¬å’Œè®­ç»ƒã€‚
* **GetData**ï¼šé€šè¿‡ä½¿ç”¨requestsåº“çš„æ–¹æ³•`requests.get(url,params,**kwargs)`å¯¹urlè¿›è¡Œæ•°æ®çš„è·å–ï¼Œå¹¶ä¸”è¿›è¡Œç½‘é¡µæ•°æ®çš„decodeã€‚
å‘ä¸Šå¯¹æœåŠ¡å±‚æä¾›`url`å’Œ`headers`çš„æ¥å£
#### æœåŠ¡å±‚
æ„æˆæœåŠ¡å±‚çš„ä¸»è¦ç±»ä¸º`Data2CSV`å’Œ`TrainDataProcess`ã€‚é€šè¿‡å¯¹è·å–çš„æ•°æ®è¿›è¡Œæ•°æ®æ¸…æ´—å’ŒCSVæŒä¹…åŒ–ä¿å­˜ï¼Œä¹‹åé€šè¿‡å¯¹CSVæ–‡ä»¶çš„åˆ†å‰²å¤„ç†ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†
* **Data2CSV**ï¼š
  * `remove_units(data)`: æ¸…ç†æ•°æ®ï¼Œå»é™¤éæ•°å­—å­—ç¬¦ï¼Œå¹¶ä¸ºç¼ºå¤±æ•°æ®å¡«å……å ä½ç¬¦ã€‚
  * `url_process(years, days)`: æ„å»ºç”¨äºè·å–å¤©æ°”æ•°æ®çš„URLï¼ŒåŸºäºè¾“å…¥çš„å¹´ä»½å’Œå¤©æ•°å·®å€¼è®¡ç®—æ—¥æœŸèŒƒå›´ã€‚
  * `data2csv(years, days, filename)`:ä»ç”Ÿæˆçš„URLä¸‹è½½å¤©æ°”æ•°æ®ï¼Œä½¿ç”¨XPathæå–ç›¸å…³æ•°æ®ï¼Œæ¸…ç†å¹¶æ ¼å¼åŒ–åï¼Œå†™å…¥åˆ°ä¸€ä¸ªCSVæ–‡ä»¶ä¸­
* **TrainDataProcess**
  * `ProcessData(city_idx)`:å®ç°æ•°æ®é¢„å¤„ç†ï¼ŒåŒ…æ‹¬æ¸…æ´—å’Œåˆ†å‰²ã€‚
æœåŠ¡å±‚é€šè¿‡è°ƒç”¨æ•°æ®å±‚è·å–æ•°æ®ï¼Œå¹¶ä¸”å‘ä¸Šæä¾›`years`ã€ `days` ã€`city_idx` æ¥å£
#### åº”ç”¨å±‚
æ„æˆåº”ç”¨å±‚çš„ä¸»è¦ç±»ä¸º`Model`å’Œ`Socket`ã€‚ä»–çš„å®ç°ä¸»è¦æ¥è‡ªäºè¡¨ç¤ºå±‚çš„è°ƒç”¨ï¼Œå½“è¡¨ç¤ºå±‚æœ‰åŒ…æ‹¬ä½†ä¸é™äºæ›´æ”¹æŸ¥è¯¢åŸå¸‚çš„äº‹ä»¶è¯·æ±‚æ—¶ï¼Œé™„åŠ ä¼ å…¥çš„å‚æ•°å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒ,å¹¶æœ¬åœ°åŒ–ä¸ºPKLæ–‡ä»¶å‡å°‘ç½‘ç«™å‹åŠ›ã€‚
* **Model**ï¼š
  * `GetModel(city_idx, filename="Model.pkl")`ï¼šå®ç°æ¨¡å‹è®­ç»ƒã€è¯„ä¼°å’Œä¿å­˜ã€‚
* **socket**ï¼š
  * `find(city_name)`:ä¼ å…¥çš„åŸå¸‚åç§°ï¼Œç”¨äºåœ¨ city.csv æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚
åº”ç”¨å±‚é€šè¿‡ä¸Šå±‚ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œå‘ä¸Šå¯¹è¡¨ç¤ºå±‚æä¾›`city_name `çš„æ¥å£
#### è¡¨ç¤ºå±‚
è¡¨ç¤ºå±‚ä¸»è¦é€šè¿‡ç½‘ç«™ä¸ç”¨æˆ·è¿›è¡Œå¯è§†åŒ–çš„äº¤äº’ï¼Œå¯è§†åŒ–çš„ä¸»è¦å®ç°ç±»ä¸º`VISUALIZATION`ã€‚é€šè¿‡ç”¨æˆ·åœ¨å¯è§†åŒ–æ§ä»¶è¿›è¡Œä¸åŒçš„è¾“å…¥ï¼Œå°†å…¶ä½œä¸ºå‚æ•°è°ƒç”¨ä¸‹ä¸€å±‚çš„æœåŠ¡è¿›è¡Œåé¦ˆå¹¶ä¿è¯ç”¨æˆ·äº¤äº’è¿‡ç¨‹ä¸­çš„ç¨³å®šæ€§ã€‚



  
## æµ‹è¯•
æ€»ä½“çš„æµ‹è¯•æˆ‘ä»¬æ•´ä½“åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¯¹äºç½‘ç«™çš„åœ¨çº¿æµ‹è¯•ï¼Œå¯¹äºè®­ç»ƒæ¨¡å‹çš„è¯„ä¼°ï¼Œå’Œå¯¹äºå†…éƒ¨æ•°æ®æ¨¡å—çš„å•å…ƒæµ‹è¯•ã€‚



### å•å…ƒæµ‹è¯•
æˆ‘ä»¬ä½¿ç”¨pythonä¸­çš„unitteståº“æ¥è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå¯¹é¡¹ç›®ä¸­çš„æ ¸å¿ƒç±»å’Œå‡½æ•°åŠè¿›è¡Œæµ‹è¯•ã€‚
#### GetDataç±»
æˆ‘ä»¬ä½¿ç”¨`test_GetData.py`è¿›è¡Œç±»çš„æµ‹è¯•ã€‚è¿™ä¸ªæµ‹è¯•æ–‡ä»¶åŒ…å«äº†å¯¹`GetData`ç±»çš„å„ç§æ–¹æ³•çš„å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿æ•°æ®è·å–åŠŸèƒ½çš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚é€šè¿‡æ¨¡æ‹Ÿä¸åŒçš„ç½‘ç»œç¯å¢ƒå’Œæ•°æ®è¾“å…¥ï¼Œæˆ‘ä»¬éªŒè¯äº†`GetData`ç±»åœ¨å„ç§æƒ…å†µä¸‹çš„è¡¨ç°ï¼Œç¡®ä¿å…¶èƒ½å¤Ÿå¯é åœ°è·å–å’Œå¤„ç†å¤©æ°”æ•°æ®ã€‚

æµ‹è¯•åŠŸèƒ½ï¼šGetç±»åœ¨HTTPè¯·æ±‚å¤±è´¥å’ŒæˆåŠŸæƒ…å†µä¸‹çš„å“åº”
æµ‹è¯•ç‰ˆæœ¬ï¼š1.0
æµ‹è¯•ç¯å¢ƒï¼šPython 3.11.3 
unittest 
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.0
æµ‹è¯•è¾“å…¥ï¼šåœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œé•¿â€
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šæœç´¢æ¡†ä¸­è¾“å‡ºä»¥â€œé•¿â€å«æœ‰çš„ä¸­å›½åŸå¸‚
```python
class TestGetData(unittest.TestCase):

    @patch('requests.get')
    def test_get_success(self, mock_get):
        # Arrange
        url = "http://example.com"
        expected_content = "Example content"
        mock_response = Mock()
        mock_response.status_code = 200
        mock_response.content.decode.return_value = expected_content
        mock_get.return_value = mock_response

        get_data = GetData(url)

        # Act
        result = get_data.Get()

        # Assert
        self.assertEqual(result, expected_content)
        mock_get.assert_called_once_with(url=url, headers=get_data.headers)
        print("Test get_success passed.")

    @patch('requests.get')
    def test_get_failure(self, mock_get):
        # Arrange
        url = "http://example.com"
        mock_response = Mock()
        mock_response.status_code = 404
        mock_response.content.decode.return_value = "Not Found"
        mock_get.return_value = mock_response

        get_data = GetData(url)

        # Act
        result = get_data.Get()

        # Assert
        self.assertEqual(result, "Not Found")
        mock_get.assert_called_once_with(url=url, headers=get_data.headers)
        print("Test get_failure passed.")

if __name__ == '__main__':
    unittest.main()
```
é¢„æœŸè¾“å‡ºï¼šæµ‹è¯•å®ŒæˆåæŠ›å‡ºSystemExitå¼‚å¸¸ï¼Œç»ˆç«¯æ˜¾ç¤ºæµ‹è¯•é€šè¿‡
æµ‹è¯•è¾“å‡ºï¼š
![alt text](image.png)


#### Data2CSVç±»

æµ‹è¯•åŠŸèƒ½ï¼šæµ‹è¯•Data2CSVåœ¨å¤„ç†æ•°æ®çš„å¥å£®æ€§ã€
æµ‹è¯•ç‰ˆæœ¬ï¼š1.0
æµ‹è¯•ç¯å¢ƒï¼šPython 3.11.3
unittest
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.0
æµ‹è¯•è¾“å…¥ï¼šè™šæ‹Ÿçš„è®­ç»ƒæ•°æ®ã€éªŒè¯æ•°æ®å’Œæµ‹è¯•æ•°æ®
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šæµ‹è¯•å®ŒæˆåæŠ›å‡ºSystemExitå¼‚å¸¸ï¼Œç»ˆç«¯æ˜¾ç¤ºæµ‹è¯•é€šè¿‡

```python
import unittest
from unittest.mock import patch, MagicMock
from datetime import datetime, timedelta
from Data2CSV import remove_units, url_process, data2csv

class TestData2CSV(unittest.TestCase):

    def test_remove_units(self):
        data = ["10mm", "20%", "-", "Tr", "30.5C"]
        expected = ["10", "20", "3", "2", "30.5"]
        result = remove_units(data)
        self.assertEqual(result, expected)

    @patch('Data2CSV.datetime')
    def test_url_process(self, mock_datetime):
        mock_datetime.today.return_value = datetime(2024, 11, 14)
        years = [1, 0]
        days = [10, 5]
        expected_url = ("http://www.meteomanz.com/sy2?l=1&cou=2250&ind=57687&d1=04&m1=11&y1=2023&d2=19&m2=11&y2=2024")
        result = url_process(years, days)
        self.assertEqual(result, expected_url)

    @patch('Data2CSV.GetData')
    @patch('Data2CSV.etree.HTML')
    @patch('builtins.open', new_callable=unittest.mock.mock_open)
    def test_data2csv(self, mock_open, mock_etree, mock_getdata):
        mock_getdata.return_value.Get.return_value = '<html><body><td>10mm</td><td>20%</td><td>-</td><td>Tr</td><td>30.5C</td><td>10mm</td><td>20%</td><td>-</td><td>Tr</td><td>30.5C</td></body></html>'
        mock_etree.return_value.xpath.return_value = [MagicMock(text='10mm'), MagicMock(text='20%'), MagicMock(text='-'), MagicMock(text='Tr'), MagicMock(text='30.5C'), MagicMock(text='10mm'), MagicMock(text='20%'), MagicMock(text='-'), MagicMock(text='Tr'), MagicMock(text='30.5C')]
        years = [1, 0]
        days = [10, 5]
        filename = "test.csv"
        data2csv(years, days, filename)
        mock_open.assert_called_once_with("db/test.csv", 'w', newline='')
        handle = mock_open()
        handle.write.assert_called()
        handle.writelines.assert_called()

if __name__ == '__main__':
    unittest.main()
```
æµ‹è¯•è¾“å‡ºï¼š
![alt text](image-1.png)
### ç½‘ç«™æµ‹è¯•
æˆ‘ä»¬æŒ‰ç…§ç½‘ç«™æµ‹è¯•çš„ä¸€èˆ¬æµç¨‹ï¼Œåˆ†æ­¥éª¤å¯¹ç½‘ç«™è¿›è¡Œäº†UIæµ‹è¯•ã€é“¾æ¥æµ‹è¯•ã€æœç´¢æµ‹è¯•ã€ç½‘ç«™å“åº”
#### UIæµ‹è¯•
UIæµ‹è¯•æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è¿›è¡Œç½‘é¡µæµ‹è¯•ï¼Œä¸»è¦æµ‹è¯•åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹ï¼Œæˆ‘ä»¬ç½‘ç«™UIçš„è¡¨ç°æƒ…å†µå’Œç¨³å®šæ€§ã€‚å…·ä½“æœ‰ä»¥ä¸‹æŒ‡æ ‡ï¼š
* å„é¡µé¢çš„é£æ ¼æ˜¯å¦ç»Ÿä¸€
* å„é¡µé¢çš„å¤§å°æ˜¯å¦ä¸€è‡´ï¼›åŒæ ·çš„LOGOå›¾ç‰‡åœ¨å„ä¸ªé¡µé¢ä¸­æ˜¾ç¤ºæ˜¯å¦å¤§å°ä¸€è‡´ï¼›
* é¡µé¢åŠå›¾ç‰‡æ˜¯å¦å±…ä¸­æ˜¾ç¤º ã€å„é¡µé¢çš„titleæ˜¯å¦æ­£ç¡®ã€‚
* æ ç›®åç§°ã€æ–‡ç« å†…å®¹ç­‰å¤„çš„æ–‡å­—æ˜¯å¦æ­£ç¡®ï¼Œæœ‰é”™åˆ«å­—æˆ–ä¹±ç ï¼›
* åŒä¸€çº§åˆ«çš„å­—ä½“ã€å¤§å°ã€é¢œè‰²æ˜¯å¦ç»Ÿä¸€
#### ç½‘é¡µæµ‹è¯•



#### é“¾æ¥æµ‹è¯•
* é¡µé¢æ˜¯å¦æœ‰æ— æ³•è¿æ¥çš„å†…å®¹ï¼›å›¾ç‰‡æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œæœ‰æ— å†—ä½™å›¾ç‰‡ï¼Œä»£ç æ˜¯å¦è§„èŒƒ
* é¡µé¢ç‚¹å‡»LOGOä¸‹çš„ä¸€çº§æ ç›®æˆ–äºŒçº§æ ç›®åç§°ï¼Œæ˜¯å¦å¯è¿›å…¥ç›¸åº”çš„æ ç›®

#### æœç´¢æµ‹è¯•
##### æœç´¢è¡¥å…¨
æµ‹è¯•åŠŸèƒ½ï¼šæœç´¢æ˜¯å¦èƒ½å¤Ÿå®ç°æ­£å¸¸è¡¥å…¨
æµ‹è¯•ç¯å¢ƒï¼šMicrosoft Edge ç‰ˆæœ¬ 131.0.2903.86 (æ­£å¼ç‰ˆæœ¬) (64 ä½)
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.1
æµ‹è¯•è¾“å…¥ï¼šåœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œé•¿â€
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šæœç´¢æ¡†ä¸­è¾“å‡ºä»¥â€œé•¿â€å«æœ‰çš„ä¸­å›½åŸå¸‚

![alt text](æœç´¢è¡¥å…¨æµ‹è¯•ç”¨ä¾‹.png)

##### æœç´¢å¿«æ·é”®
æµ‹è¯•åŠŸèƒ½ï¼šæœç´¢æ¡†å¯¹äºé”®ç›˜`TAB`ï¼Œ`Enter`ï¼Œ`Up`ï¼Œ`Down`çš„æ”¯æŒ
æµ‹è¯•ç¯å¢ƒï¼šMicrosoft Edge ç‰ˆæœ¬ 131.0.2903.86 (æ­£å¼ç‰ˆæœ¬) (64 ä½)
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.1
æµ‹è¯•è¾“å…¥ï¼šåœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œé•¿â€åè¿›è¡Œé”®ç›˜å¿«æ·é”®æ“ä½œé€‰å–â€œé•¿æ˜¥å¸‚â€
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šæœç´¢æ¡†æ­£å¸¸é€‰æ‹©â€œé•¿æ˜¥å¸‚â€ï¼Œå¹¶ä¸”é¡µé¢åˆ·æ–°å…³äºâ€œé•¿æ˜¥å¸‚çš„å¤©æ°”â€
![alt text](image-5.png)

#####  é»˜è®¤æŸ¥è¯¢å­—æ®µ
æµ‹è¯•åŠŸèƒ½ï¼šæœç´¢æ¡†çš„é»˜è®¤è¾“å…¥é€‰é¡¹
æµ‹è¯•ç¯å¢ƒï¼šMicrosoft Edge ç‰ˆæœ¬ 131.0.2903.86 (æ­£å¼ç‰ˆæœ¬) (64 ä½)
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.1
æµ‹è¯•è¾“å…¥ï¼šæ— 
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šæœç´¢æ¡†é»˜è®¤é€‰æ‹©â€œé•¿æ²™å¸‚â€ï¼Œå¹¶ä¸”é¡µé¢æ˜¾ç¤ºå…³äºâ€œé•¿æ²™å¸‚â€çš„å¤©æ°”
![alt text](image-3.png)    

#### ç½‘ç«™å“åº”
##### å“åº”æ—¶é—´
æµ‹è¯•åŠŸèƒ½ï¼šå¯¹ç½‘ç«™çš„å“åº”æ—¶é—´ä½¿ç”¨pythonçš„`request`åº“è¿›è¡Œæµ‹è¯•
æµ‹è¯•ç¯å¢ƒï¼šPython 3.11.3
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.2
æµ‹è¯•è¾“å…¥ï¼šæ— 
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼šç»ˆç«¯è¾“å‡ºæ¯æ¬¡è¯·æ±‚çš„å“åº”æ—¶é—´
```python
import requests
import time
import matplotlib.pyplot as plt
from pylab import mpl
mpl.rcParams['font.sans-serif'] = ['Microsoft YaHei'] # æŒ‡å®šé»˜è®¤å­—ä½“ï¼šè§£å†³plotä¸èƒ½æ˜¾ç¤ºä¸­æ–‡é—®é¢˜
mpl.rcParams['axes.unicode_minus'] = False # è§£å†³ä¿å­˜å›¾åƒæ˜¯è´Ÿå·'-'æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜

# ç½‘ç«™ URL

url="https://weathernow-android.streamlit.app/"
# æµ‹è¯•é…ç½®
num_requests = 20  # è¯·æ±‚æ¬¡æ•°
interval = 1       # æ¯æ¬¡è¯·æ±‚é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰

# å­˜å‚¨å“åº”æ—¶é—´æ•°æ®
response_times = []

print(f"å¼€å§‹æµ‹è¯• {url} çš„å“åº”æ—¶é—´...")
for i in range(num_requests):
    try:
        start_time = time.time()
        response = requests.get(url, timeout=10)  # è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º 10 ç§’
        end_time = time.time()
        
        # è®¡ç®—å“åº”æ—¶é—´
        response_time = (end_time - start_time) * 1000  # è½¬ä¸ºæ¯«ç§’
        response_times.append(response_time)
        
        print(f"è¯·æ±‚ {i + 1}: å“åº”æ—¶é—´ = {response_time:.2f} ms, çŠ¶æ€ç  = {response.status_code}")
        
        # å¦‚æœéœ€è¦æ£€æŸ¥æ˜¯å¦æ­£å¸¸è®¿é—®ï¼Œå¯ä»¥æ·»åŠ æ–­è¨€
        assert response.status_code == 200, "çŠ¶æ€ç å¼‚å¸¸"
    except Exception as e:
        print(f"è¯·æ±‚ {i + 1} å¤±è´¥: {e}")
        response_times.append(None)  # è®°å½•å¤±è´¥çš„è¯·æ±‚ä¸º None
    time.sleep(interval)

# æ•°æ®å¤„ç†ï¼ˆç§»é™¤å¤±è´¥çš„è¯·æ±‚æ•°æ®ï¼‰
valid_times = [t for t in response_times if t is not None]

# å¯è§†åŒ–å“åº”æ—¶é—´
plt.figure(figsize=(10, 6))
plt.plot(range(1, len(response_times) + 1), response_times, marker='o', label="å“åº”æ—¶é—´ (ms)")
plt.axhline(y=sum(valid_times) / len(valid_times), color='r', linestyle='--', label="å¹³å‡å“åº”æ—¶é—´")

# å›¾è¡¨è®¾ç½®
plt.title(f"ç½‘ç«™å“åº”æ—¶é—´æµ‹è¯• ({url})")
plt.xlabel("è¯·æ±‚æ¬¡æ•°")
plt.ylabel("å“åº”æ—¶é—´ (ms)")
plt.xticks(range(1, len(response_times) + 1))
plt.legend()
plt.grid()

# æ˜¾ç¤ºå›¾è¡¨
plt.show()

```
æµ‹è¯•è¾“å‡ºï¼šå¹³å‡å“åº”æ—¶é•¿2654.37ms
![ç½‘ç«™å“åº”æ—¶é—´](/images/website_time.png)


#### ç»¼åˆè¯„ä»·

æˆ‘ä»¬ä½¿ç”¨äº†è¾ƒä¸ºæˆç†Ÿçš„ç½‘ç«™å“åº”æµ‹è¯•å·¥å…·[Gtmetrix](https://gtmetrix.com/)è¿›è¡Œäº†å“åº”æµ‹è¯•
è¿™ä¸ªå·¥å…·æ ¹æ®ç½‘ç«™é€Ÿåº¦æ‰“åˆ†A-Fï¼Œç»“åˆYslowå’ŒPageSpeedInsightsçš„æ•°æ®ï¼Œæä¾›ç½‘ç«™è¡¨ç°æŠ¥å‘Šå¸®åŠ©ç”¨æˆ·åˆ†æç½‘ç«™é—®é¢˜å¹¶ä¼˜åŒ–ã€‚
![alt text](/images/website_test.png)
* **GTmetrix Grade**ï¼šä½ çš„ GTmetrix ç­‰çº§æ˜¯å¯¹ä½ çš„æ•´ä½“é¡µé¢æ€§èƒ½çš„è¯„ä¼°ã€‚å®ƒæ—¢åæ˜ äº†æ‚¨çš„é¡µé¢ä¸ºç”¨æˆ·åŠ è½½çš„é€Ÿåº¦ï¼Œä¹Ÿåæ˜ äº†å®ƒçš„æ€§èƒ½ã€‚
* **Structure**ï¼šæ‚¨çš„ç»“æ„å¾—åˆ†æ˜¯æˆ‘ä»¬å¯¹ Lighthouse å’Œè‡ªå®šä¹‰ GTmetrix å®¡æ ¸çš„ä¸“æœ‰è¯„ä¼°ã€‚å®ƒä»£è¡¨äº†æ‚¨çš„é¡µé¢æ˜¯å¦èƒ½è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚
* **Web Vitals**ï¼š Web Vitals ä»£è¡¨äº†ä¸€å°éƒ¨åˆ†æ ¸å¿ƒæŒ‡æ ‡ï¼Œå®ƒä»¬è¡¨æ˜æ‚¨æ˜¯å¦ä¸ºè®¿å®¢æä¾›äº†å¿«é€Ÿå’Œï¼ˆGoogle æ‰€ç§°çš„ï¼‰æ„‰æ‚¦çš„ä½“éªŒã€‚åœ¨è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„ä¼˜åŒ–ä¹‹å‰ï¼Œé¦–å…ˆå…³æ³¨è¿™äº›æœ‰å½±å“åŠ›çš„æŒ‡æ ‡
* **CLS**ï¼šCLS è¡¨ç¤ºé¡µé¢åŠ è½½æ—¶è®¿é—®è€…ä½“éªŒåˆ°çš„å¸ƒå±€å˜åŒ–ç¨‹åº¦ã€‚è¦è·å¾—è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼ŒCLS åˆ†æ•°åº”åœ¨ 0.1 æˆ–ä»¥ä¸‹ã€‚
  
### æ¨¡å‹è¯„ä¼°

æˆ‘ä»¬å¯¹äºæ¨¡å‹çš„æ‹Ÿåˆç¨‹åº¦ä»**MAE**ï¼ˆå¹³å‡ç»å¯¹è¯¯å·®ï¼‰çš„è§’åº¦è¿›è¡Œåˆ†æï¼Œè¿™æ˜¯ä¸€ç§è¡¡é‡é¢„æµ‹å€¼ä¸å®é™…å€¼ä¹‹é—´å·®å¼‚çš„å¸¸ç”¨æŒ‡æ ‡ã€‚

é™¤æ­¤ä»¥å¤–ï¼Œå› ä¸ºåœ¨çº¿ç½‘ç«™çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬åŒæ—¶éœ€è¦å…³æ³¨æ¨¡å‹çš„**è®­ç»ƒè€—æ—¶**ï¼Œå³æ¨¡å‹åœ¨æ¥æ”¶åˆ°è¾“å…¥æ•°æ®åç”Ÿæˆé¢„æµ‹ç»“æœæ‰€éœ€çš„æ—¶é—´ã€‚
è¿™ä¸¤ä¸ªæŒ‡æ ‡å…±åŒå†³å®šäº†æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°ï¼Œæ—¢è¦ä¿è¯é¢„æµ‹çš„å‡†ç¡®æ€§ï¼Œåˆè¦ç¡®ä¿ç”¨æˆ·ä½“éªŒçš„æµç•…æ€§ã€‚

*ä»¥ä¸‹æµ‹è¯•å‡åœ¨æµ‹è¯•æ•°æ®å·²**ç•¥å»**ä»è¿œç¨‹æœåŠ¡å™¨ä¸­è·å–è®­ç»ƒä¿¡æ¯çš„å“åº”æ—¶é•¿ã€‚*

#### MAE
å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMAEï¼ŒMean Absolute Errorï¼‰æ˜¯è¡¡é‡é¢„æµ‹æ¨¡å‹æˆ–ä¼°è®¡æ–¹æ³•å‡†ç¡®åº¦çš„æŒ‡æ ‡ä¹‹ä¸€ã€‚å®ƒåæ˜ äº†é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„ç»å¯¹è¯¯å·®çš„å¹³å‡æ°´å¹³ã€‚MAE çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š
```
MAE = (1/n) * Î£|yi - xi|
```
åœ¨æœºå™¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹çš„å‚æ•°è‡³å…³é‡è¦ã€‚
```python
n_estimators=500,  # å¢åŠ æ ‘çš„æ•°é‡ä»¥æé«˜æ€§èƒ½
max_features='auto',  # å¯»æ‰¾æœ€ä½³åˆ†å‰²æ—¶è¦è€ƒè™‘çš„ç‰¹å¾æ•°é‡
bootstrap=True,  # æ„å»ºæ ‘æ—¶æ˜¯å¦ä½¿ç”¨è‡ªåŠ©æ ·æœ¬
n_jobs=-1  # ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„æ ¸å¿ƒè¿›è¡Œå¹¶è¡Œå¤„ç†
```
å…¶ä¸­æœ€ä¸»è¦çš„å‚æ•°ä¾¿æ˜¯`n_estimators`,ä»–ç›´æ¥å½±å“äº†ç³»ç»Ÿè¿›è¡Œæ¨¡å‹è®­ç»ƒæ—¶çš„è´¨é‡å’Œæ—¶é•¿ã€‚è€ƒè™‘åˆ°åœ¨çº¿ç½‘ç«™çš„å“åº”é€Ÿåº¦çš„è¦æ±‚ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦å…¼é¡¾è®­ç»ƒè´¨é‡å’Œå“åº”æ—¶é•¿äºŒè€…çš„å¹³è¡¡ã€‚
å¸¸ç”¨çš„å‚æ•°è°ƒä¼˜æ–¹æ³•æœ‰**è´å¶æ–¯è°ƒä¼˜**ï¼Œ**ç½‘æ ¼æœç´¢**ç­‰ã€‚




#### è®­ç»ƒè€—æ—¶
åœ¨ä½¿ç”¨ time åº“å¯¹æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒçš„è€—æ—¶è¿›è¡Œæµ‹é‡æ—¶ï¼Œå¯ä»¥é€šè¿‡è®°å½•è®­ç»ƒå¼€å§‹å’Œç»“æŸæ—¶çš„æ—¶é—´ç‚¹ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„æ—¶é—´å·®ï¼Œæ¥ç²¾ç¡®è¯„ä¼°æ¨¡å‹è®­ç»ƒæ‰€éœ€çš„æ—¶é—´ã€‚è¿™ç§æ–¹æ³•èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…äº†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆç‡ï¼Œä»è€Œä¼˜åŒ–ä»£ç æ€§èƒ½æˆ–é€‰æ‹©æ›´é«˜æ•ˆçš„ç®—æ³•ä¸ç¡¬ä»¶é…ç½®ã€‚



#### æµ‹è¯•ç”¨ä¾‹
å› ä¸ºæµ‹è¯•ç›¸å¯¹ç®€å•ä¸€æ¬¡è€—æ—¶ç›¸å¯¹è¾ƒå¤§ï¼Œä¸”è¿”å›å€¼ä¸ºåˆ—è¡¨å½¢å¼ã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨è£…é¥°å™¨è¿›è¡Œæµ‹è¯•ï¼Œè€Œæ˜¯åœ¨testä¸­æ–°å¢äº†æµ‹è¯•è„šæœ¬[test_model.py](test_model.py)è¿›è¡Œæµ‹è¯•ï¼Œä¸è¿‡è¿™ä¹Ÿä½¿å¾—æˆ‘ä»¬çš„è¿”å›å€¼æ›´æ˜“è¢«å¤„ç†å’Œå¯è§†åŒ–ã€‚

æµ‹è¯•åŠŸèƒ½ï¼šå¯¹æ¨¡å‹çš„MAEå’Œè®­ç»ƒè€—æ—¶è¿›è¡Œæµ‹è¯•ã€‚
æµ‹è¯•ç¯å¢ƒï¼šPython 3.11.3
æµ‹è¯•æ—¶é—´ï¼š2024.12.10
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.2
æµ‹è¯•è¾“å…¥ï¼š`np.linspace(50, 1000, 50, dtype=int)`
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼š`figure`ä¸­æ˜¾ç¤º`n_estimators`ä¸`MAE`ã€`Training Time`è¶‹åŠ¿
```python

import joblib
import datetime as DT
from src.lib.GetModel import GetModel
import matplotlib.pyplot as plt
import time
import numpy as np

# å®šä¹‰n_estimatorsçš„èŒƒå›´
n_estimators_range = np.linspace(50, 200, 50, dtype=int)
mae_list = []
time_list = []

for n in n_estimators_range:
    #æ²¡æœ‰ä½¿ç”¨è£…é¥°å™¨
    #æ­¤å¤„éœ€è¦æ›´æ”¹GetModelå‡½æ•°è¿›è¡Œæµ‹è¯•
    r,training_time = GetModel(n_estimators=n)
    mae = r[0]
    mae_list.append(mae)
    time_list.append(training_time)
    
    print(f"n_estimators: {n}, MAE: {mae}, Training Time: {training_time} seconds")

# å¯è§†åŒ–MAEä¸n_estimatorsçš„å…³ç³»
plt.figure(figsize=(14, 7))

plt.subplot(1, 2, 1)
plt.plot(n_estimators_range, mae_list, marker='o', linestyle='-', color='b', label='MAE')
plt.title('MAE vs n_estimators')
plt.xlabel('n_estimators')
plt.ylabel('MAE')
plt.grid(True)
plt.legend()

plt.subplot(1, 2, 2)
plt.plot(n_estimators_range, time_list, marker='o', linestyle='-', color='r', label='Training Time')
plt.title('Training Time vs n_estimators')
plt.xlabel('n_estimators')
plt.ylabel('Training Time (seconds)')
plt.grid(True)
plt.legend()

plt.tight_layout()
plt.show()

# è¯»å–ä¿å­˜çš„æ¨¡å‹
model = joblib.load('Model.pkl')

# æœ€ç»ˆé¢„æµ‹ç»“æœ
preds = model.predict(r[1])
```
æµ‹è¯•è¾“å‡ºï¼š

![](/images/è°ƒä¼˜_1.png)



æµ‹è¯•åŠŸèƒ½ï¼šå¯¹æ¨¡å‹çš„MAEå’Œè®­ç»ƒè€—æ—¶è¿›è¡Œæµ‹è¯•ã€‚
æµ‹è¯•ç¯å¢ƒï¼šPython 3.11.3
æµ‹è¯•ç‰ˆæœ¬ï¼šversion-1.2
æµ‹è¯•æ—¶é—´ï¼š2024.12.10
æµ‹è¯•è¾“å…¥ï¼š`np.linspace(50, 200, 50, dtype=int)`,`é•¿æ²™å¸‚`
æµ‹è¯•é¢„æœŸè¾“å‡ºï¼š`figure`ä¸­æ˜¾ç¤º`n_estimators`ä¸`MAE`ã€`Training Time`è¶‹åŠ¿
```python

import joblib
import datetime as DT
from src.lib.GetModel import GetModel
import matplotlib.pyplot as plt
import time
import numpy as np

# å®šä¹‰n_estimatorsçš„èŒƒå›´
n_estimators_range = np.linspace(50, 200, 50, dtype=int)
mae_list = []
time_list = []

for n in n_estimators_range:
    #æ²¡æœ‰ä½¿ç”¨è£…é¥°å™¨
    #æ­¤å¤„éœ€è¦æ›´æ”¹GetModelå‡½æ•°è¿›è¡Œæµ‹è¯•
    r,training_time = GetModel(n_estimators=n)
    mae = r[0]
    mae_list.append(mae)
    time_list.append(training_time)
    
    print(f"n_estimators: {n}, MAE: {mae}, Training Time: {training_time} seconds")

# å¯è§†åŒ–MAEä¸n_estimatorsçš„å…³ç³»
plt.figure(figsize=(14, 7))

plt.subplot(1, 2, 1)
plt.plot(n_estimators_range, mae_list, marker='o', linestyle='-', color='b', label='MAE')
plt.title('MAE vs n_estimators')
plt.xlabel('n_estimators')
plt.ylabel('MAE')
plt.grid(True)
plt.legend()

plt.subplot(1, 2, 2)
plt.plot(n_estimators_range, time_list, marker='o', linestyle='-', color='r', label='Training Time')
plt.title('Training Time vs n_estimators')
plt.xlabel('n_estimators')
plt.ylabel('Training Time (seconds)')
plt.grid(True)
plt.legend()

plt.tight_layout()
plt.show()

# è¯»å–ä¿å­˜çš„æ¨¡å‹
model = joblib.load('Model.pkl')

# æœ€ç»ˆé¢„æµ‹ç»“æœ
preds = model.predict(r[1])
```
æµ‹è¯•è¾“å‡ºï¼š

![](/images/è°ƒä¼˜_2.png)

_ä½¿ç”¨ç½‘æ ¼æœç´¢ä¼˜åŒ–åï¼Œæˆ‘ä»¬è®¾ç½®`n_estimators`ä¸º80ï¼ˆ2024.12.10ï¼‰_
_åœ¨å¤§å¤šæ•°ç¯å¢ƒçš„ç»¼åˆè®­ç»ƒè€—æ—¶å¤§è‡´åœ¨0.1272sï¼ˆ2024.12.10ï¼‰_
_ä½¿ç”¨ç½‘æ ¼æœç´¢ä¼˜åŒ–åï¼ŒMAE=11.2ï¼ˆ2024.12.10ï¼‰_

## é¢„æœŸæˆæœ

- [x] æ·»åŠ æ›´æ–°æ—¥å¿—
- [x] ä½¿ç”¨ Radom Frost è¿›è¡Œæ¨¡å‹è®­ç»ƒ
- [x] ä½¿ç”¨Streamlitè¿›è¡Œæ•°æ®å¯è§†åŒ–
- [X] ä½¿ç”¨Streamlit Cloudè¿›è¡ŒæœåŠ¡å™¨éƒ¨ç½²
- [x] è¿›ä¸€æ­¥ä¼˜åŒ–å¯è§†åŒ–ç•Œé¢
    - [x] å¢åŠ ä¾§è¾¹æ æ§ä»¶
    - [x] å¢åŠ å¼€å±åŠ¨ç”»
    - [ ] å¢åŠ å¤šç§æ•°æ®å±•ç¤ºå›¾æ ·
- [x] ä¼˜åŒ–æ¨¡å‹è¶…å‚æ•°
- [ ] ä¼˜åŒ–ç½‘ç«™å“åº”é€Ÿåº¦  
    - [x] è°ƒä¼˜`n_estimators`å‚æ•°å‡å°‘è®­ç»ƒæ—¶é•¿
    - [ ] æœ¬åœ°å‚¨å­˜è®­ç»ƒæ•°æ®å‡å°‘ç½‘ç»œå»¶è¿Ÿ



## è‡´è°¢

æ­¤é¡¹ç›®çš„å¯è§†åŒ–æ¨¡æ¿å’Œå¯¹streamlitéƒ¨ç½²ç¯å¢ƒå¤„ç†ä¸»è¦çµæ„Ÿæ¥æºäºä½œè€…`JuneWaySue`  
æ­¤é¡¹ç›®çš„å¯è§†åŒ–ç•Œé¢çš„å¤§éƒ¨åˆ†ç»„ä»¶ä¸»è¦æ¥æºäº[Streamlit Gallery](https://streamlit.io/gallery)ï¼Œæ„Ÿè°¢ä¸ºå¼€æºåšå‡ºè´¡çŒ®çš„ä½œè€…ã€‚
* [GW Quickview](https://gw-quickview.streamlit.app/)
* [30Day of Streamlit](https://30days.streamlit.app/)
* [JuneWaySue](https://github.com/JuneWaySue)
* [Streamlitä¸­æ–‡æ–‡æ¡£](https://www.streamlit.org.cn/)
